============================= test session starts ==============================
platform linux -- Python 3.14.2, pytest-9.0.2, pluggy-1.6.0
rootdir: /home/brian/people/Brian/PromptGrimoireTool/.worktrees/101-cjk-blns
configfile: pyproject.toml
plugins: anyio-4.12.1, depper-0.2.0, base-url-2.1.0, xdist-3.8.0, asyncio-1.3.0, playwright-0.7.2
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
collected 18 items

tests/benchmark/test_dom_performance.py 
============================================================
BENCHMARK: BLNS corpus
  Characters: 25,875
  Lines: 742
  Spans: 2,282
  DOM nodes: 3,134
  Render time: 265.9ms
  Selection latency: 70.0ms
  Scroll time: 209.3ms
  Memory: 20.5MB
============================================================
.
============================================================
BENCHMARK: 183-austlii (legal)
  Characters: 29,859
  Lines: 2,011
  Spans: 4,720
  DOM nodes: 6,811
  Render time: 260.8ms
  Selection latency: 78.2ms
  Scroll time: 206.8ms
  Memory: 25.1MB
============================================================
.
============================================================
BENCHMARK: conv: austlii.html
  Characters: 28,368
  Lines: 491
  Spans: 4,672
  DOM nodes: 5,272
  Render time: 237.0ms
  Selection latency: 66.3ms
  Scroll time: 208.3ms
  Memory: 23.0MB
============================================================
.
============================================================
BENCHMARK: conv: chinese_wikipedia.html
  Characters: 1,337
  Lines: 715
  Spans: 78
  DOM nodes: 878
  Render time: 151.6ms
  Selection latency: 69.8ms
  Scroll time: 207.4ms
  Memory: 17.2MB
============================================================
.
============================================================
BENCHMARK: conv: claude_cooking.html
  Characters: 433
  Lines: 7
  Spans: 78
  DOM nodes: 194
  Render time: 111.3ms
  Selection latency: 69.2ms
  Scroll time: 207.5ms
  Memory: 16.9MB
============================================================
.
============================================================
BENCHMARK: conv: claude_maths.html
  Characters: 685
  Lines: 6
  Spans: 118
  DOM nodes: 233
  Render time: 132.7ms
  Selection latency: 70.6ms
  Scroll time: 207.9ms
  Memory: 17.1MB
============================================================
.
============================================================
BENCHMARK: conv: gemini_crdt_discussion.html
  Characters: 6,034
  Lines: 230
  Spans: 874
  DOM nodes: 1,213
  Render time: 137.1ms
  Selection latency: 69.4ms
  Scroll time: 207.4ms
  Memory: 17.9MB
============================================================
.
============================================================
BENCHMARK: conv: gemini_gemini.html
  Characters: 5,282
  Lines: 91
  Spans: 753
  DOM nodes: 953
  Render time: 152.8ms
  Selection latency: 74.4ms
  Scroll time: 206.9ms
  Memory: 18.1MB
============================================================
.
============================================================
BENCHMARK: conv: gemini_images.html
  Characters: 1,433
  Lines: 24
  Spans: 198
  DOM nodes: 331
  Render time: 124.4ms
  Selection latency: 71.5ms
  Scroll time: 207.6ms
  Memory: 17.0MB
============================================================
.
============================================================
BENCHMARK: conv: openai_chat.html
  Characters: 22,191
  Lines: 1,085
  Spans: 3,172
  DOM nodes: 4,366
  Render time: 223.6ms
  Selection latency: 69.3ms
  Scroll time: 207.4ms
  Memory: 21.9MB
============================================================
.
============================================================
BENCHMARK: conv: openai_dr.html
  Characters: 118,645
  Lines: 1,693
  Spans: 16,451
  DOM nodes: 18,253
  Render time: 480.3ms
  Selection latency: 96.4ms
  Scroll time: 206.6ms
  Memory: 34.9MB
============================================================
.
============================================================
BENCHMARK: conv: openai_images.html
  Characters: 8,962
  Lines: 416
  Spans: 1,440
  DOM nodes: 1,965
  Render time: 164.8ms
  Selection latency: 71.1ms
  Scroll time: 206.7ms
  Memory: 18.8MB
============================================================
.
============================================================
BENCHMARK: conv: scienceos_locus.html
  Characters: 9,577
  Lines: 107
  Spans: 1,316
  DOM nodes: 1,532
  Render time: 170.1ms
  Selection latency: 72.1ms
  Scroll time: 209.1ms
  Memory: 18.8MB
============================================================
.
============================================================
BENCHMARK: conv: scienceos_rubber.html
  Characters: 3,579
  Lines: 75
  Spans: 536
  DOM nodes: 720
  Render time: 135.9ms
  Selection latency: 72.2ms
  Scroll time: 206.8ms
  Memory: 17.2MB
============================================================
.
============================================================
BENCHMARK: conv: translation_japanese_sample.html
  Characters: 2,583
  Lines: 157
  Spans: 328
  DOM nodes: 580
  Render time: 134.2ms
  Selection latency: 69.9ms
  Scroll time: 206.9ms
  Memory: 17.3MB
============================================================
.
============================================================
BENCHMARK: conv: translation_korean_sample.html
  Characters: 1,050
  Lines: 31
  Spans: 227
  DOM nodes: 353
  Render time: 147.1ms
  Selection latency: 70.8ms
  Scroll time: 206.7ms
  Memory: 17.2MB
============================================================
.
============================================================
BENCHMARK: conv: translation_spanish_sample.html
  Characters: 2,825
  Lines: 139
  Spans: 409
  DOM nodes: 643
  Render time: 133.7ms
  Selection latency: 71.1ms
  Scroll time: 204.7ms
  Memory: 17.1MB
============================================================
.
====================================================================================================
BENCHMARK SUMMARY
====================================================================================================
Mode: WORD-BASED

Name                      Chars      Spans      DOM        Render       Select       Scroll    
----------------------------------------------------------------------------------------------------
BLNS corpus               25875      2282       3134       266ms        70ms        209ms
183-austlii (legal)       29859      4720       6811       261ms        78ms        207ms
conv: austlii.html        28368      4672       5272       237ms        66ms        208ms
conv: chinese_wikipedia.html 1337       78         878        152ms        70ms        207ms
conv: claude_cooking.html 433        78         194        111ms        69ms        208ms
conv: claude_maths.html   685        118        233        133ms        71ms        208ms
conv: gemini_crdt_discussion.html 6034       874        1213       137ms        69ms        207ms
conv: gemini_gemini.html  5282       753        953        153ms        74ms        207ms
conv: gemini_images.html  1433       198        331        124ms        71ms        208ms
conv: openai_chat.html    22191      3172       4366       224ms        69ms        207ms
conv: openai_dr.html      118645     16451      18253      480ms        96ms        207ms
conv: openai_images.html  8962       1440       1965       165ms        71ms        207ms
conv: scienceos_locus.html 9577       1316       1532       170ms        72ms        209ms
conv: scienceos_rubber.html 3579       536        720        136ms        72ms        207ms
conv: translation_japanese_sample.html 2583       328        580        134ms        70ms        207ms
conv: translation_korean_sample.html 1050       227        353        147ms        71ms        207ms
conv: translation_spanish_sample.html 2825       409        643        134ms        71ms        205ms
====================================================================================================

Total characters processed: 268,718
Total spans created: 37,652
Average render time: 186ms
Max render time: 480ms
Max selection latency: 96ms
Max memory: 34.9MB

STATUS: ACCEPTABLE
====================================================================================================
.

============================= 18 passed in 27.95s ==============================
